repositories.jcenter()

apply plugin: 'java'
apply plugin: 'maven'

sourceCompatibility = JavaVersion.VERSION_1_7
targetCompatibility = JavaVersion.VERSION_1_7

configurations.testCompile.extendsFrom configurations.compileOnly
conf2ScopeMappings.addMapping 300, configurations.compileOnly, 'provided'

dependencies {
    compileOnly 'com.google.auto.value:auto-value:1.3'
    testCompile 'junit:junit:4.12'
}

jar.exclude '**/*.java'

task noProc(type: Jar) {
    classifier = 'no-proc'
    from sourceSets.main.allSource
    exclude 'META-INF/services'
    exclude '**/proc'
    with jar
}

artifacts.archives noProc
